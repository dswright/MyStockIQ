<% content_for :title do %>
  <title><%= @stock[:ticker_symbol] %> Stock Predictions - StockHero.com</title>
<% end %>

<script>
function changeText() {
  document.getElementById("demo").innerHTML = "Paragraph changed.";
};

function simpleAlert() {
  window.alert("simpleAlert")
};



function resizeChart() {
  var height = $("#stock-div").width()/3+30;
  $("#stock-div").css("height", height);
  $(".stockgraph-container1").css("height", height+10);
};
 
var chart1; // globally available
$(document).ready(function () {
  var width = $("#stock-div").width();

  //resize the container height based on the width.
  var height = $("#stock-div").width()/3+30;
  $("#stock-div").css("height", height);
  $(".stockgraph-container1").css("height", height + 10);


  var price_array = gon.price_array;
  var ticker_symbol = gon.ticker_symbol;

  var seriesVar = [{
    name : ticker_symbol,
    data : price_array
  }];

  chart1 = new Highcharts.StockChart({
    chart: {
      renderTo: 'stock-div'
    },
    xAxis: {
      min: 1406800000000,
      max: 1418342400000
    },
    rangeSelector : {
      enabled: false
    },
    scrollbar: {
      enabled: false
    },
    navigator: {
      enabled: false
    },
    series: seriesVar
  });

  get_ranges = function() {
    range_min = $(this).data("x-range-min");
    range_max = $(this).data("x-range-max");
    chart1.yAxis[0].setExtremes(0,null);
    chart1.xAxis[0].setExtremes(range_min, range_max);
    //window.alert(range_min + range_max)
  };

  $("button[data-x-range-min]").click(get_ranges);
   
  $(window).bind("orientationchange resize", resizeChart);

  //remove branding logo that says 'highcarts'
  $( "text" ).remove( ":contains('Highcharts.com')" );

});

</script>

<div class = "constrainer">
  <div class = "main-aside col-sm-4">

    <div class = "stock-container">
      <div class = "row">
        <div class = "col-xs-4">
          <p class = "stock-ticker"><%= @stock[:ticker_symbol] %></p>
        </div>
        <div class = "col-xs-6">
          <p class = "stock-ticker-price"><%= @stock[:daily_stock_price] %></p>
          <p class = "stock-ticker-price">
              <font color="green" > +1.34 </font>
          </p>
        </div>
      </div>
      <div class = "row">
        <div class = "col-xs-4">
          <p class = "stock-ticker-detail-header">Predictions</p>
          <p class = "stock-ticker-detail-number">38</p>
        </div>
        <div class = "col-xs-4">
          <p class = "stock-ticker-detail-header">Comments</p>
          <p class = "stock-ticker-detail-number">28</p>
        </div>
      </div>
      <div class = "row">
        <div class = "col-xs-4">
          <p class = "stock-ticker-detail-header">P/E</p>
          <p class = "stock-ticker-detail-number">62.37M<br>64.13M</p>
        </div>
        <div class = "col-xs-4">
          <p class = "stock-ticker-detail-header">52wk</p>
          <p class = "stock-ticker-detail-number">67.77<br>103.74</p>
        </div>
        <div class = "col-xs-4">
          <p class = "stock-ticker-detail-header">Vol/ Avg</p>
          <p class = "stock-ticker-detail-number">28</p>
        </div>
      </div>
    </div>

<!-- PREDICTION FORM -->
    <div class = "stock-page-prediction-box">
      <p class = "stock-page-prediction-header">
        <%= @stock.ticker_symbol %>
      </p>
        <%= render 'shared/prediction_form' %>
    </div>


    <script>
      $("#target-price").focus(function () {
        alert("fuuuuuuck");
      //  if ($("#prediction-fields").is(":show"))
      // {
      //  $("#prediction-fields").slideDown("normal");
      // }
      //  else  {
      //  $("#prediction-fields").hide();
      // }
      });
    </script>


<!-- Comment Form -->
	<% if logged_in? %>
    	<div class = "stock-page-comment-box">
     	 <p class = "stock-page-prediction-header">
        	Comment on <%= @stock[:ticker_symbol] %>
      	</p>
      	<%= render 'shared/comment_form' %>
    	</div>
    <% end %>


    <div class = "stock-page-top-analysts">

    
      <p class = "stock-page-top-analysts-header">
        Top <%= @stock[:ticker_symbol] %> Analysts
      </p>

      <a href = "#">
        <div class = "row">
          <div class = "col-sm-3">
            <div class = "top-analysts-mug-container">
              <img src="images/mug2.png">
            </div>
          </div>
          <div class = "top-analysts-txt-container col-xs-9">
            <p class = "top-analysts-handle">USER-NAME</p>
            <p class = "top-analysts-points">100 points</p>
          </div>
        </div>
      </a>

    </div>

  </div>


<!-- STOCK GRAPH -->

  <div class = "stock-page-aside col-sm-8">

    <div class = "graph-container">
      <div class = "graph-buttons">
        <% @date_limits_array.each do |date_limits_hash| %>
          
          <button id="button" 
              data-x-range-min=<%= date_limits_hash[:x_range_min] %> 
              data-x-range-max=<%= date_limits_hash[:x_range_max] %>
            >
            <%= date_limits_hash[:name] %>
          </button>
        <% end %>
        <button id="button" onclick="simpleAlert()">
          test
        </button>
      </div>
      

      <div id="stock-div" style="min-width:50px;"></div>
    </div>

    <div class = "prediction-buttons-container">
      <div class = "row">
        <div class = "col-xs-6">
          <input type="submit" class="btn prediction-btn-stock-page" value="Make a Prediction">
        </div>
        <div class = "col-xs-6">
          <input type="submit" class="btn prediction-btn-stock-page" value="Make a Comment">
        </div>
      </div>
    </div>


<!-- STREAM POSTS -->
  <%= render "streams/stream" %>


    <div class = "prediction-post-comment">
      <div class = "row">
        <div class = "col-xs-3 col-sm-2 col-md-2">
          <div class = "prediction-post-mug-container">
            <img src="images/dillshmill.png">
          </div>
        </div>
        <div class = "prediction-post-txt-container col-xs-9">
          <p class = "handle">@dillshmill&nbsp;&bull;&nbsp;2hr</p>
          <p class = "comment-txt">Lorem $APPL ipsum dolor sit amet, consectetur adipiscing elit.</p>
          <div class = "prediction-post-txt-icons">
            <i class="fa fa-reply fa-lg">&nbsp;&nbsp;1</i>
            <i class="fa fa-thumbs-o-down fa-lg">&nbsp;&nbsp;2</i>
            <i class="fa fa-thumbs-o-up fa-lg">&nbsp;&nbsp;3</i>
          </div>
        </div>
      </div>
    </div>






    <div class = "prediction-post">
      <div class = "row">
        <div class = "col-xs-3 col-sm-2 col-md-2">
          <div class = "prediction-post-mug-container">
            <img src="images/mug2.png">
          </div>
        </div>
        <div class = "prediction-post-txt-container col-xs-9">
          <p class = "handle">Username &nbsp;&bull;&nbsp;1hr</p>
          <p class = "prediction-txt">&#36;AAPL&#58;&nbsp;&#43;50 days remaining&nbsp;
            <span>&ndash;4</span></p>
          <p class = "comment-txt">Lorem $APPL ipsum dolor sit amet, consectetur adipiscing elit.</p>
          <div class = "prediction-post-txt-icons">
            <i class="fa fa-reply fa-lg">&nbsp;&nbsp;1</i>
            <i class="fa fa-thumbs-o-down fa-lg">&nbsp;&nbsp;2</i>
            <i class="fa fa-thumbs-o-up fa-lg">&nbsp;&nbsp;3</i>
          </div>
        </div>
      </div>
    </div>

    <div class = "prediction-post">
      <div class = "row">
        <div class = "col-xs-3 col-sm-2 col-md-2">
          <div class = "prediction-post-mug-container">
            <img src="images/mug2.png">
          </div>
        </div>
        <div class = "prediction-post-txt-container col-xs-9">
          <p class = "handle">@gngrdev&nbsp;&bull;&nbsp;1hr</p>
          <p class = "prediction-txt">&#36;AAPL&#58;&nbsp;&#43;50 days remaining&nbsp;
            <span>&ndash;4</span></p>
          <p class = "comment-txt">Lorem $APPL ipsum dolor sit amet, consectetur adipiscing elit.</p>
          <div class = "prediction-post-txt-icons">
            <i class="fa fa-reply fa-lg">&nbsp;&nbsp;1</i>
            <i class="fa fa-thumbs-o-down fa-lg">&nbsp;&nbsp;2</i>
            <i class="fa fa-thumbs-o-up fa-lg">&nbsp;&nbsp;3</i>
          </div>
        </div>
      </div>
    </div>


    <div class = "prediction-post-reply">
      <div class = "row">
        <div class = "col-xs-3 col-sm-2 col-md-2">
          <div class = "prediction-post-mug-container">
            <img src="images/dillshmill.png">
          </div>
        </div>
        <div class = "prediction-post-txt-container col-xs-9">
          <p class = "handle">@dillshmill&nbsp;&bull;&nbsp;2hr</p>
          <p class = "prediction-txt">&#36;AAPL&#58;&nbsp;&#43;50 days remaining&nbsp;
            <span>&ndash;4</span></p>
          <p class = "comment-txt">@gngrdev Lorem $APPL ipsum dolor sit amet, consectetur adipiscing elit.</p>
          <div class = "prediction-post-txt-icons">
            <i class="fa fa-reply fa-lg">&nbsp;&nbsp;1</i>
            <i class="fa fa-thumbs-o-down fa-lg">&nbsp;&nbsp;2</i>
            <i class="fa fa-thumbs-o-up fa-lg">&nbsp;&nbsp;3</i>
          </div>
        </div>
      </div>
    </div>

    <div class = "prediction-post-agree">
      <div class = "row">
        <div class = "col-xs-3 col-sm-2 col-md-2">
          <div class = "prediction-post-mug-container">
            <div class = "agree-thumb-box">
              <i class="fa fa-thumbs-o-up fa-lg"></i>
            </div>
            <img src="images/dillshmill.png">
          </div>
        </div>
        <div class = "prediction-post-txt-container col-xs-9">
          <p class = "agree-txt">@gngrdev agrees
          <p class = "handle">@dillshmill&nbsp;&bull;&nbsp;2hr</p>
          <p class = "comment-txt">@gngrdev Lorem $APPL ipsum dolor sit amet, consectetur adipiscing elit.</p>
          <div class = "prediction-post-txt-icons">
            <i class="fa fa-reply fa-lg">&nbsp;&nbsp;1</i>
            <i class="fa fa-thumbs-o-down fa-lg">&nbsp;&nbsp;2</i>
            <i class="fa fa-thumbs-o-up fa-lg">&nbsp;&nbsp;3</i>
          </div>
        </div>
      </div>
    </div>

    <div class = "prediction-post-disagree">
      <div class = "row">
        <div class = "col-xs-3 col-sm-2 col-md-2">
          <div class = "prediction-post-mug-container">
            <div class = "disagree-thumb-box">
              <i class="fa fa-thumbs-o-down fa-lg"></i>
            </div>
            <img src="images/dillshmill.png">
          </div>
        </div>
        <div class = "prediction-post-txt-container col-xs-9">
          <p class = "disagree-txt">@gngrdev disagrees
          <p class = "handle">@dillshmill&nbsp;&bull;&nbsp;2hr</p>
          <p class = "comment-txt">@gngrdev Lorem $APPL ipsum dolor sit amet, consectetur adipiscing elit.</p>
          <div class = "prediction-post-txt-icons">
            <i class="fa fa-reply fa-lg">&nbsp;&nbsp;1</i>
            <i class="fa fa-thumbs-o-down fa-lg">&nbsp;&nbsp;2</i>
            <i class="fa fa-thumbs-o-up fa-lg">&nbsp;&nbsp;3</i>
          </div>
        </div>
      </div>
    </div>

    <div class = "prediction-post-comment">
      <div class = "row">
        <div class = "col-xs-3 col-sm-2 col-md-2">
          <div class = "prediction-post-mug-container">
            <img src="images/dillshmill.png">
          </div>
        </div>
        <div class = "prediction-post-txt-container col-xs-9">
          <p class = "handle">@dillshmill&nbsp;&bull;&nbsp;2hr</p>
          <p class = "comment-txt">Lorem $APPL ipsum dolor sit amet, consectetur adipiscing elit.</p>
          <div class = "prediction-post-txt-icons">
            <i class="fa fa-reply fa-lg">&nbsp;&nbsp;1</i>
            <i class="fa fa-thumbs-o-down fa-lg">&nbsp;&nbsp;2</i>
            <i class="fa fa-thumbs-o-up fa-lg">&nbsp;&nbsp;3</i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>





