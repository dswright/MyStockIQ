
<div class="prediction-item" id="stream_<%= stream.streamable.class.name %>_<%= stream.streamable.id %>">
  
  <div class="vote-count-container clearfix">
    <div class="prediction-item-body col-xs-11 clearfix">
      <div class="col-xs-2 prediction-item-img">
        <%= link_to image_tag(stream.streamable.user.image), "/users/#{stream.streamable.user.username}/" %>
      </div>
      <div class="prediction-item-txt">
        <%= link_to stream.streamable.user.username, "/users/#{stream.streamable.user.username}/", class: "prediction-item-username" %>
        <p class="prediction-item-main-txt">
          <a href ="/predictions/<%= stream.streamable.id %>/">$<%= stream.streamable.stock.ticker_symbol %> Prediction:</a>
          <% percent_change = ((stream.streamable.prediction_end_price / stream.streamable.start_price-1) * 100).round(0) %>
         $<%= stream.streamable.prediction_end_price %> (<%= percent_change %>%) in <%=distance_of_time_in_words(stream.streamable.created_at, stream.streamable.prediction_end_time) %>
        </p> 
      </div>
      <div class="prediction-item-tweet">
        <% unless stream.streamable.tag == nil %>
          <p><%= render html: stream.streamable.tag.content.html_safe %></p>
      <%else %>
        <p><%= stream.streamable.content %></p>
      <% end %>
      </div>
      <div class="prediction-footer">
        <i class="fa fa-clock-o">&nbsp;<%= distance_of_time_in_words(stream.streamable.created_at, Time.now) %> ago</i><span><%= stream.streamable.score %> points</span>
      </div>
    </div>
    <div class="prediction-item-vote-count col-xs-1" id="likes-Prediction-<%= stream.streamable.id %>">
      <%= render partial: "streams/stream_like", locals: {likable_type:stream.streamable.class.name, likable_id:stream.streamable.id} %>
    </div>
  </div>
  
  <div class="stream-item-comments" id="new-reply-container">
    
    <!-- load this only if there are replies -->
    <div class="stream-comment-header">
      <p><%= stream.streamable.replies.count %> Replies</p>
    </div>

    <!-- load partials for each reply -->
    <% stream.streamable.replies.reorder('created_at asc').each do |reply| %>
      <%= render partial: "streams/stream_reply", locals: {reply: reply}  %>
    <% end %>
    
    <!-- load this reply input everytime -->
    <%= render partial: "streams/stream_reply_form", locals: {repliable_type: stream.streamable.class.name, repliable_id: stream.streamable.id}  %>

  </div>
</div>
